<!DOCTYPE html>
<html>
 <head>
    <!-- ajax는 jquary 필요 -->
   <!-- jQuery first, then Popper.js, then Bootstrap JS -->
   <!-- <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
   integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
   crossorigin="anonymous"></script> -->
   <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
   <script>
       // type: api 요청 종류 
       // method: GET, POST, PATCH, PUT, DELETE 
       // GET : 데이터를 조회 
       // POST: 데이터를 생성
       // PATCH: 데이터를 일부 수정
       // PUT: 데이터를 전체 수정
       // DELETE: 데이터를 삭제 
       // 해당 메소드는 반드시 지킬 필요가 없다 (제안만 둘뿐 강제가 아니라서 에러나지 않음)
       // 이번 강의 GET(데이터조회). POST(데이터생성, 수정, 삭제)
       
       // 양식 칸이 있는데 > url , header , body 칸 
       // GET : url, header 양식만 채움 
       // POST : url, header, body 모두 사용 

       // (클라이언트-브라우저)가 서버에게 데이터를 줄 때 
       // get은 반드시 url을 통해서 보냄 (ex: naver.com?username=ohm1224(키값)&password=1233(여러개&사용) > url 키값을 보냄) => 보안성최악 
       // post : body에 데이터를 담아서 전송 
       // ex: naver.com , body: {username: ll, password: 122} => 안전성 높음 


   </script>

   <script>
       function test(){
       $.ajax({
        type: "GET", // GET 방식으로 요청한다.
        url: "http://openapi.seoul.go.kr:8088/6d4d776b466c656533356a4b4b5872/json/RealtimeCityAir/1/99",
        data: {}, // 요청하면서 함께 줄 데이터 (GET 요청시엔 비워두세요) // body칸 
        success: function(response){ // 서버에서 준 결과를 response라는 변수에 담음
            let data = response["RealtimeCityAir"];
            let result = data["row"];

            $('#data-box').empty(); //버튼 누를때마다 내용삭제하고 다시 불러옴 
            for(let i=0; i<result.length; i++){
                let gu = result[i]["MSRSTE_NM"];
                let mise = result[i]["IDEX_MVL"];

                // console.log(gu, mise);
                let html = `<li>${gu} : ${mise}</li>`;
                $('#data-box').append(html);
            }

            // console.log(result);
        // console.log(response) // 서버에서 준 결과를 이용해서 나머지 코드를 작성
            },
        error: function(error) {
            console.log(error);
        }

        })
    }
   </script>

 </head>
 <body>
    <button onclick="test()">데이터 불러오기</button> <!-- 버튼을 눌렀을 때 api 데이터 불러옴  -->
    <!-- 화면을 새로고침 없이 버튼만 눌러서 데이터를 불러옴  -->
    
    <ul id="data-box">
        

    </ul>

 </body>
</html>